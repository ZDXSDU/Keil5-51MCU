C51 COMPILER V9.60.7.0   KEY                                                               09/04/2023 11:00:35 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN .\Objects\Key.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Key.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Key.l
                    -st) OBJECT(.\Objects\Key.obj)

line level    source

   1          #include <REGX52.H>
   2          unsigned char KeyNumber; // ç”¨äºå®šæ—¶å™¨æ‰«æç‹¬ç«‹æŒ‰é”®ä½¿ç”¨
   3          unsigned char Key_GetState(void);
   4          /**
   5          * @brief  è·å–ç‹¬ç«‹æŒ‰é”®é”®ç 
   6          * @param  æ— 
   7          * @retval æŒ‰ä¸‹æŒ‰é”®çš„é”®ç ï¼ŒèŒƒå›´ï¼š0~4ï¼Œæ— æŒ‰é”®æŒ‰ä¸‹æ—¶è¿”å›å€¼ä¸º0
   8          */
   9          unsigned char Key(void)
  10          {
  11   1              unsigned char Temp = 0; // ç”±äºåœ¨Key_Loop()å†…èµ‹å€¼çš„KeyNumberå¹¶ä¸ä¼šè‡ªåŠ¨æ¸…é›¶ï¼Œæ‰€ä»¥è¿™é‡Œéœ
             -€è¦ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥æ¥æ”¶KeyNumberçš„å€¼ï¼Œå¹¶æŠŠKeyNumberæ¸…é›¶åè¿”å›ä¸´æ—¶å˜é‡ï¼Œç”±äºä¸´æ—¶å˜é‡æ—¢ä¸æ˜
             -¯é™æ€å˜é‡åˆä¸æ˜¯å…¨å±€å˜é‡ï¼Œä»–ä¼šåœ¨è¿™ä¸ªå‡½æ•°è¿è¡Œç»“æŸåå›æ”¶
  12   1              Temp = KeyNumber;
  13   1              KeyNumber = 0;
  14   1              return Temp;    
  15   1      }
  16          /**
  17          * @brief å¾ªç¯è°ƒç”¨  ç”¨äºå®šæ—¶å™¨ä¸­æ–­æ‰«æç‹¬ç«‹æŒ‰é”® 
  18          * @param  æ— 
  19          * @retval æ— 
  20          * @interpretation  åœ¨å®šæ—¶å™¨Timer0ä¸­æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ20MSï¼‰è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªå‡½æ•°ã€‚å¦‚æœä½¿ç”
             -¨å®šæ—¶å™¨ä¸­æ–­æ¥æ‰«ææ¡ˆä»¶ï¼Œåˆ™åº”é…åˆä¸‹æ–¹çš„Key_GetStateå‡½æ•°ä¸€èµ·é£Ÿç”¨
  21          */
  22          void Key_Loop(void)
  23          {
  24   1              // è¿™ä¸ªåœ°æ–¹ä¼šåœ¨main.cä¸­çš„å®šæ—¶å™¨Timer0ä¸­æ–­å‡½æ•°å†…æ¯éš”20msè°ƒç”¨ä¸€æ¬¡ï¼Œ20msåˆšå¥½æŠŠæŒ‰é
             -”®çš„æŠ–åŠ¨ç»™æ¶ˆé™¤æ‰
  25   1              static unsigned char NowState, LastState; // å®šä¹‰ä¸¤ä¸ªæ ‡è¯†ä½ç”¨æ¥å­˜å‚¨å½“å‰çš„çŠ¶æ€å’Œä¹‹å‰çš„
             -çŠ¶æ€
  26   1              LastState = NowState; // è¿è¡Œçš„æ—¶å€™ç”¨LastStateæ¥æ”¶NowStateçš„è‡³ï¼Œä»¥ç»™NowStateå¯ä»¥æ¥å—å®æ
             -—¶æ‰«æåˆ°çš„å€¼
  27   1              NowState = Key_GetState(); // å½“å‰çš„çŠ¶æ€ç­‰äºç°åœ¨è¯»å–å‡ºæ¥çš„çŠ¶æ€
  28   1              if(NowState == 1 && LastState == 0) // ä¸Šæ¬¡çš„æ ‡è¯†ä½æ˜¯æŒ‰é”®1ï¼Œè¿™æ¬¡çš„æ ‡è¯†ä½æ˜¯0ï¼Œè¯æ˜å·²ç
             -»æ¾æ‰‹äº†æŒ‰é”®1
  29   1                      KeyNumber = 1;
  30   1              if(NowState == 2 && LastState == 0) // ä¸Šæ¬¡çš„æ ‡è¯†ä½æ˜¯æŒ‰é”®2ï¼Œè¿™æ¬¡çš„æ ‡è¯†ä½æ˜¯0ï¼Œè¯æ˜å·²ç
             -»æ¾æ‰‹äº†æŒ‰é”®2
  31   1                      KeyNumber = 2;
  32   1              if(NowState == 3 && LastState == 0) // ä¸Šæ¬¡çš„æ ‡è¯†ä½æ˜¯æŒ‰é”®3ï¼Œè¿™æ¬¡çš„æ ‡è¯†ä½æ˜¯0ï¼Œè¯æ˜å·²ç
             -»æ¾æ‰‹äº†æŒ‰é”®3
  33   1                      KeyNumber = 3;
  34   1              if(NowState == 4 && LastState == 0) // ä¸Šæ¬¡çš„æ ‡è¯†ä½æ˜¯æŒ‰é”®4ï¼Œè¿™æ¬¡çš„æ ‡è¯†ä½æ˜¯0ï¼Œè¯æ˜å·²ç
             -»æ¾æ‰‹äº†æŒ‰é”®4
  35   1                      KeyNumber = 4;
  36   1      }
  37          /**
  38          * @brief è·å–æ­¤åˆ»çš„æŒ‰é”®çŠ¶æ€
  39          * @param  æ— 
  40          * @retval æ— 
  41          * @interpretation  æè¿°
  42          */
  43          unsigned char Key_GetState(void)
  44          {
C51 COMPILER V9.60.7.0   KEY                                                               09/04/2023 11:00:35 PAGE 2   

  45   1              unsigned char KeyNumber=0;      
  46   1              if(P3_1==0){KeyNumber=1;}
  47   1              if(P3_0==0){KeyNumber=2;}
  48   1              if(P3_2==0){KeyNumber=3;}
  49   1              if(P3_3==0){KeyNumber=4;}       
  50   1              return KeyNumber;
  51   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     85    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
