C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/05/2023 18:02:01 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602OUEN
OBJECT MODULE PLACED IN .\Objects\LCD1602OUEN.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE LCD1602OUEN.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\LCD1602OUEN.lst) OBJECT(.\Objects\LCD1602OUEN.obj)

line level    source

   1          #include <STC89C5xRC.H>
   2          #include <INTRINS.H>
   3          sbit LCD_RS = P2^6; // æ•°æ®/æŒ‡ä»¤é€‰æ‹©IOå£  1:æ•°æ® 0:æŒ‡ä»¤
   4          sbit LCD_RW = P2^5; // è¯»/å†™é€‰æ‹©IOå£  1:è¯» 0:å†™
   5          sbit LCD_E = P2^7; // ä½¿èƒ½  1:æ•°æ®æœ‰æ•ˆ ä¸‹é™æ²¿æ‰§è¡Œå‘½ä»¤
   6          sfr LCD_DataPort = 0x80; // LCD1602 D0~D7æ•°æ®IOå£
   7          void LCD_Delay(); // Delay1ms
   8          void LCD_WriteCommand(unsigned char Command); // æ—¶åºç»“æž„-å†™æŒ‡ä»¤
   9          void LCD_WriteData(unsigned char Data); // æ—¶åºç»“æž„-å†™æ•°æ®
  10          void LCD_Init(void); // LCDåˆå§‹åŒ–
  11          void LCD_SetCursor(unsigned char Row, unsigned char Column); // è®¾ç½®å…‰æ ‡ä½ç½®
  12          unsigned int LCD_Power(unsigned int X, Y); // ä¹˜æ–¹è¿ç®—
  13          void LCD_ShowChar(unsigned char Row, unsigned char Column, unsigned char Char); // LCDæ˜¾ç¤ºå­—ç¬¦
  14          void LCD_ShowString(unsigned char Row, unsigned char Column, unsigned char *String); // LCDæ˜¾ç¤ºå­—ç¬¦ä¸²
  15          void LCD_ShowUnsignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char
             - Length); // LCDæ˜¾ç¤ºæ— ç¬¦å·åè¿›åˆ¶æ•´æ•°
  16          void LCD_ShowSignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char L
             -ength); // LCDæ˜¾ç¤ºæœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•°
  17          void LCD_ShowHexNum(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length); /
             -/ LCDæ˜¾ç¤ºåå…­è¿›åˆ¶æ•°å­—
  18          void LCD_WriteCommand(unsigned char Command)
  19          {
  20   1              LCD_RS = 0;
  21   1              LCD_RW = 0;
  22   1              LCD_DataPort = Command;
  23   1              LCD_E = 1;
  24   1              LCD_Delay();
  25   1              LCD_E = 0;
  26   1              LCD_Delay();
  27   1      }
  28          void LCD_WriteData(unsigned char Data)
  29          {
  30   1              LCD_RS = 1;
  31   1              LCD_RW = 0;
  32   1              LCD_DataPort = Data;
  33   1              LCD_E = 1;
  34   1              LCD_Delay();
  35   1              LCD_E = 0;
  36   1              LCD_Delay();
  37   1      }
  38          void LCD_Delay() 
  39          { // @11.0592MHz Delay1ms:é˜²æ­¢èŠ¯ç‰‡ä½¿èƒ½Eç½®é«˜å†ç»™ä¸‹é™æ²¿æ—¶æŒ‡ä»¤æ‰§è¡Œæ—¶é—´ä¸å¤Ÿ
  40   1              unsigned char data i, j;
  41   1              _nop_();
  42   1              i = 2;
  43   1              j = 199;
  44   1              do
  45   1              {
  46   2                      while (--j);
  47   2              } while (--i);
  48   1      }
  49          void LCD_Init(void)
  50          {
  51   1              LCD_WriteCommand(0x38); // å…«ä½æ•°æ®æŽ¥å£ï¼Œä¸¤è¡Œæ˜¾ç¤ºï¼Œ5*7ç‚¹é˜µ
C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/05/2023 18:02:01 PAGE 2   

  52   1              LCD_WriteCommand(0x0C); // æ˜¾ç¤ºå¼€ï¼Œå…‰æ ‡å…³ï¼Œé—ªçƒå…³
  53   1              LCD_WriteCommand(0x06); // æ•°æ®è¯»å†™æ“ä½œåŽï¼Œå…‰æ ‡è‡ªåŠ¨åŠ ä¸€ï¼Œç”»é¢ä¸å˜
  54   1              LCD_WriteCommand(0x01); // æ¸…å±
  55   1      }
  56          void LCD_SetCursor(unsigned char Row, unsigned char Column)
  57          {
  58   1              if(Row == 1) LCD_WriteCommand(0x80 | (Column - 1));
  59   1              else LCD_WriteCommand(0x80 | (0x40 + (Column - 1)));
  60   1      }
  61          void LCD_ShowChar(unsigned char Row, unsigned char Column, unsigned char Char)
  62          {
  63   1              LCD_SetCursor(Row, Column);
  64   1              LCD_WriteData(Char);
  65   1      }
  66          void LCD_ShowString(unsigned char Row, unsigned char Column, unsigned char *String)
  67          {
  68   1      
  69   1              unsigned char i;
  70   1              LCD_SetCursor(Row, Column);     
  71   1              for(i = 0; String[i] != '\0'; i++)
  72   1              { // éåŽ†å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¹¶ä¾æ¬¡è¾“å‡ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°é‡è§å­—ç¬¦ä¸²ç»“å°¾æ
             - ‡å¿—
  73   2                      LCD_WriteData(String[i]);
  74   2              }
  75   1      }
  76          void LCD_ShowUnsignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char
             - Length)
  77          {
  78   1              unsigned char i;
  79   1              LCD_SetCursor(Row, Column);
  80   1              for(i = Length; i > 0; i--)
  81   1              {
  82   2                      LCD_WriteData(((Number / LCD_Power(10, i -1)) % 10) + 0x30);
  83   2              }
  84   1      }
  85          unsigned int LCD_Power(unsigned int X, Y)
  86          {
  87   1              unsigned char i;
  88   1              unsigned int Result = 1;
  89   1              for(i = 0; i < Y; i++)
  90   1              {
  91   2                      Result *= X;
  92   2              }
  93   1              return Result;
  94   1      }
  95          void LCD_ShowSignedDECNumber(unsigned char Row, unsigned char Column, int Number, unsigned char Length)
  96          {
*** WARNING C235 IN LINE 96 OF LCD1602OUEN.c: parameter 3: different types
  97   1              unsigned char i;
  98   1              unsigned int Num;
  99   1              LCD_SetCursor(Row, Column);
 100   1              if(Number < 0)
 101   1              {
 102   2                      LCD_WriteData('-');
 103   2                      Num = -Number;
 104   2              }
 105   1              for(i = Length; i > 0; i--)
 106   1              {
 107   2                      LCD_WriteData(((Num / LCD_Power(10, i -1)) % 10) + 0x30);
 108   2              }
 109   1      }
 110          void LCD_ShowHexNum(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length)
C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/05/2023 18:02:01 PAGE 3   

 111          {
 112   1              unsigned char i, SingleNumber;
 113   1              LCD_SetCursor(Row, Column);
 114   1              for(i = Length; i > 0; i--)
 115   1              {
 116   2                      SingleNumber = (Number / LCD_Power(16, i -1)) % 16;
 117   2                      // å°† 11 12 13 14 15 è½¬æ¢æˆA B C D E F
 118   2                      if(SingleNumber > 9) LCD_WriteData(SingleNumber + 'A');
 119   2                      else LCD_WriteData(SingleNumber + 0x30);                
 120   2              }
 121   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    350    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      31
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
