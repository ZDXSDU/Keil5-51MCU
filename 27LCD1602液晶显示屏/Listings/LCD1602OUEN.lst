C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/06/2023 11:16:18 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602OUEN
OBJECT MODULE PLACED IN .\Objects\LCD1602OUEN.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE LCD1602OUEN.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\LCD1602OUEN.lst) OBJECT(.\Objects\LCD1602OUEN.obj)

line level    source

   1          #include <STC89C5xRC.H>
   2          #include <INTRINS.H>
   3          sbit LCD_RS = P2^6; // æ•°æ®/æŒ‡ä»¤é€‰æ‹©IOå£  1:æ•°æ® 0:æŒ‡ä»¤
   4          sbit LCD_RW = P2^5; // è¯»/å†™é€‰æ‹©IOå£  1:è¯» 0:å†™
   5          sbit LCD_E = P2^7; // ä½¿èƒ½  1:æ•°æ®æœ‰æ•ˆ ä¸‹é™æ²¿æ‰§è¡Œå‘½ä»¤
   6          sfr LCD_DataPort = 0x80; // LCD1602 D0~D7æ•°æ®IOå£
   7          void LCD_Delay(); // Delay1ms
   8          void LCD_WriteCommand(unsigned char Command); // æ—¶åºç»“æž„-å†™æŒ‡ä»¤
   9          void LCD_WriteData(unsigned char Data); // æ—¶åºç»“æž„-å†™æ•°æ®
  10          void LCD_Init(void); // LCDåˆå§‹åŒ–
  11          void LCD_SetCursor(unsigned char Row, unsigned char Column); // è®¾ç½®å…‰æ ‡ä½ç½®
  12          unsigned int LCD_Power(unsigned int X, Y); // ä¹˜æ–¹è¿ç®—
  13          void LCD_ShowChar(unsigned char Row, unsigned char Column, unsigned char Char); // LCDæ˜¾ç¤ºå­—ç¬¦
  14          void LCD_ShowString(unsigned char Row, unsigned char Column, unsigned char *String); // LCDæ˜¾ç¤ºå­—ç¬¦ä¸²
  15          void LCD_ShowUnsignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char
             - Length); // LCDæ˜¾ç¤ºæ— ç¬¦å·åè¿›åˆ¶æ•´æ•°
  16          void LCD_ShowSignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char L
             -ength); // LCDæ˜¾ç¤ºæœ‰ç¬¦å·åè¿›åˆ¶æ•´æ•°
  17          void LCD_ShowHexNum(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length); /
             -/ LCDæ˜¾ç¤ºåå…­è¿›åˆ¶æ•°å­—
  18          void LCD_ShowBinNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length)
             -; // LCDæ˜¾ç¤ºäºŒè¿›åˆ¶æ•°å­—
  19          void LCD_WriteCommand(unsigned char Command)
  20          {
  21   1              LCD_RS = 0;
  22   1              LCD_RW = 0;
  23   1              LCD_DataPort = Command;
  24   1              LCD_E = 1;
  25   1              LCD_Delay();
  26   1              LCD_E = 0;
  27   1              LCD_Delay();
  28   1      }
  29          void LCD_WriteData(unsigned char Data)
  30          {
  31   1              LCD_RS = 1;
  32   1              LCD_RW = 0;
  33   1              LCD_DataPort = Data;
  34   1              LCD_E = 1;
  35   1              LCD_Delay();
  36   1              LCD_E = 0;
  37   1              LCD_Delay();
  38   1      }
  39          void LCD_Delay() 
  40          { // @11.0592MHz Delay1ms:é˜²æ­¢èŠ¯ç‰‡ä½¿èƒ½Eç½®é«˜å†ç»™ä¸‹é™æ²¿æ—¶æŒ‡ä»¤æ‰§è¡Œæ—¶é—´ä¸å¤Ÿ
  41   1              unsigned char data i, j;
  42   1              _nop_();
  43   1              i = 2;
  44   1              j = 199;
  45   1              do
  46   1              {
  47   2                      while (--j);
  48   2              } while (--i);
  49   1      }
  50          void LCD_Init(void)
C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/06/2023 11:16:18 PAGE 2   

  51          {
  52   1              LCD_WriteCommand(0x38); // å…«ä½æ•°æ®æŽ¥å£ï¼Œä¸¤è¡Œæ˜¾ç¤ºï¼Œ5*7ç‚¹é˜µ
  53   1              LCD_WriteCommand(0x0C); // æ˜¾ç¤ºå¼€ï¼Œå…‰æ ‡å…³ï¼Œé—ªçƒå…³
  54   1              LCD_WriteCommand(0x06); // æ•°æ®è¯»å†™æ“ä½œåŽï¼Œå…‰æ ‡è‡ªåŠ¨åŠ ä¸€ï¼Œç”»é¢ä¸å˜
  55   1              LCD_WriteCommand(0x01); // æ¸…å±
  56   1      }
  57          void LCD_SetCursor(unsigned char Row, unsigned char Column)
  58          {
  59   1              if(Row == 1) LCD_WriteCommand(0x80 | (Column - 1));
  60   1              else LCD_WriteCommand(0x80 | (0x40 + (Column - 1)));
  61   1      }
  62          void LCD_ShowChar(unsigned char Row, unsigned char Column, unsigned char Char)
  63          {
  64   1              LCD_SetCursor(Row, Column);
  65   1              LCD_WriteData(Char);
  66   1      }
  67          void LCD_ShowString(unsigned char Row, unsigned char Column, unsigned char *String)
  68          {
  69   1      
  70   1              unsigned char i;
  71   1              LCD_SetCursor(Row, Column);     
  72   1              for(i = 0; String[i] != '\0'; i++)
  73   1              { // éåŽ†å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¹¶ä¾æ¬¡è¾“å‡ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°é‡è§å­—ç¬¦ä¸²ç»“å°¾æ
             - ‡å¿—
  74   2                      LCD_WriteData(String[i]);
  75   2              }
  76   1      }
  77          void LCD_ShowUnsignedDECNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char
             - Length)
  78          {
  79   1              unsigned char i;
  80   1              LCD_SetCursor(Row, Column);
  81   1              for(i = Length; i > 0; i--)
  82   1              {
  83   2                      LCD_WriteData(((Number / LCD_Power(10, i -1)) % 10) + 0x30);
  84   2              }
  85   1      }
  86          unsigned int LCD_Power(unsigned int X, Y)
  87          {
  88   1              unsigned char i;
  89   1              unsigned int Result = 1;
  90   1              for(i = 0; i < Y; i++)
  91   1              {
  92   2                      Result *= X;
  93   2              }
  94   1              return Result;
  95   1      }
  96          void LCD_ShowSignedDECNumber(unsigned char Row, unsigned char Column, int Number, unsigned char Length)
  97          {
*** WARNING C235 IN LINE 97 OF LCD1602OUEN.c: parameter 3: different types
  98   1              unsigned char i;
  99   1              unsigned int Num;
 100   1              LCD_SetCursor(Row, Column);
 101   1              if(Number < 0)
 102   1              {
 103   2                      LCD_WriteData('-');
 104   2                      Num = -Number;
 105   2              }
 106   1              for(i = Length; i > 0; i--)
 107   1              {
 108   2                      LCD_WriteData(((Num / LCD_Power(10, i -1)) % 10) + 0x30);
 109   2              }
C51 COMPILER V9.60.7.0   LCD1602OUEN                                                       09/06/2023 11:16:18 PAGE 3   

 110   1      }
 111          void LCD_ShowHexNum(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length)
 112          {
 113   1              unsigned char i, SingleNumber;
 114   1              LCD_SetCursor(Row, Column);
 115   1              for(i = Length; i > 0; i--)
 116   1              {
 117   2                      SingleNumber = (Number / LCD_Power(16, i -1)) % 16;
 118   2                      // å°† 11 12 13 14 15 è½¬æ¢æˆA B C D E F
 119   2                      if(SingleNumber > 9) LCD_WriteData(SingleNumber - 10 + 'A');
 120   2                      else LCD_WriteData(SingleNumber + 0x30);                
 121   2              }
 122   1      }
 123          void LCD_ShowBinNumber(unsigned char Row, unsigned char Column, unsigned int Number, unsigned char Length)
 124          {
 125   1              unsigned char i;
 126   1              LCD_SetCursor(Row, Column);
 127   1              for(i = Length; i > 0; i--)
 128   1              {
 129   2                      LCD_WriteData('0' + (Number / LCD_Power(2, i - 1)) % 2);
 130   2              }
 131   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    410    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      37
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
